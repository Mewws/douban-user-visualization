<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://cdn.bootcss.com/fullPage.js/2.9.7/jquery.fullpage.css"
      rel="stylesheet"
    />
    <style>
      html {
        font-family: PingFangSC-Regular, sans-serif !important;
      }
      .fp-controlArrow {
        opacity: 1;
        transition: opacity cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.2s;
      }
      .fp-controlArrow:hover {
        opacity: 0.75;
      }

      .section {
        background-color: #ececec;
      }
      .section,
      .slide {
        text-align: center;
      }

      li {
        text-emphasis: none;
      }

      img {
        width: 800px;
      }
      em {
        font-size: 2em;
        text-decoration: none;
        padding: 0 2px;
      }
      h1 {
        font-size: 4em;
      }
      h2 {
        font-size: 2em;
        font-weight: 0;
      }
      p {
        font-size: 1.5em;
      }
    </style>
    <title>豆瓣用户公开数据可视化</title>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <script src="https://cdn.bootcss.com/fullPage.js/2.9.7/jquery.fullpage.js"></script>
    <script src="https://cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.js"></script>
    <script src="./lib/china.js"></script>
  </head>
  <body>
    <div id="info-loading">正在载入...</div>
    <div id="fullpage" style="display:none;">
      <!-- <div class="section"></div> -->

      <!-- 首页 -->
      <div class="section">
        <img src="http://img.daixinye.com/xiaohui.png" style="width:200px;" />
        <h1>豆瓣用户公开数据可视化</h1>
        <p>戴鑫业 黄卓玥 魏冉</p>
      </div>

      <div class="section"><h1>douban.daixinye.com</h1></div>

      <!-- 项目情况 -->
      <div class="section">
        <h1>一、需求分析</h1>
        <h1>二、获取数据</h1>
        <h1>三、处理数据</h1>
        <h1>四、数据可视化</h1>
      </div>
      <div class="section">
        <div class="slide">
          <h1>需求分析</h1>
          <h2>豆瓣用户个人主页公开数据</h2>
        </div>
        <div class="slide">
          <iframe
            src="https://www.douban.com/people/turbine/"
            frameborder="0"
            width="1200"
            height="700"
            sandbox="allow-scripts"
          ></iframe>
          <p>
            用户ID | 用户名 | 用户头像 | 加入日期 | 常居地 | 关注数 | 被关注数 |
            评论数 | 小组数 | 电影 | 阅读
          </p>
        </div>
      </div>
      <div class="section">
        <div class="slide">
          <h1>获取数据</h1>
          <h2>使用 Python + Redis 爬取、存储豆瓣用户主页信息</h2>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190114223129.png" alt="" />
          <h2>首先生成一个待爬用户池</h2>
          <p>话题广场、电影评论、小组成员、关注人列表、被关注人列表...</p>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190113152304.png" alt="" />
          <h2>编写爬取用户个人页面数据的爬虫</h2>
          <p>
            从 Redis
            中获取随机用户ID、数据提取、异常情况处理（需要登录、无效用户等）、伪造HTTP
            Header、随机时间sleep、循环...
          </p>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190114221216.png" />
          <!--
            <img src="http://img.daixinye.com/20190113153349.png" alt="" />
          -->
          <h2>爬取数据</h2>
          <p>运行、输出关键信息、手动切换 IP ...</p>
        </div>

        <div class="slide">
          <h2>一些事实...</h2>
          <p>整个软院只有三个公网IP</p>
          <p>能直接用接口获取的数据就不要去爬HTML了</p>
          <p>不要作死带着Cookie去爬数据</p>
          <img src="http://img.daixinye.com/20190113154258.png" alt="" />
        </div>
      </div>
      <div class="section">
        <div class="slide">
          <h1>处理数据</h1>
          <h2>Redis => MySQL => Python => JSON/CSV</h2>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190114224030.png" alt="" />
          <h2>爬取的 Reids 原始数据</h2>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190113153642.png" alt="" />
          <h2>导入到 MySQL 中进行初步分析</h2>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190115004223.png" alt="" />
          <h2>使用 Python 进行数据清洗、扩展、导出</h2>
        </div>
        <div class="slide">
          <img src="http://img.daixinye.com/20190114225316.png" alt="" />
          <h2>处理成适合可视化使用的 JSON 格式数据</h2>
        </div>
      </div>

      <div class="section">
        <div class="slide">
          <h1>数据可视化</h1>
          <h2>jQuery + Fullpage.js + Echarts</h2>
        </div>
      </div>

      <div class="section">
        <div class="slide">
          <p>
            历时<em>5</em>天 <em>3</em>个被永久封停的账号 <em>2</em>G流量
            <em>1</em>个大作业 => <em>15174</em> 位用户
          </p>
        </div>
      </div>

      <!-- 时间 -->
      <div class="section">
        <div class="slide"><h1>「 加入时间 」</h1></div>
        <!-- 热力分布 1 -->
        <div class="slide">
          <div
            id="time:all_1"
            style="width: 900px;height:700px;margin: 0 auto;"
          ></div>
        </div>
        <div class="slide">
          <div
            id="time:all_2"
            style="width: 900px;height:700px;margin: 0 auto;"
          ></div>
        </div>
        <!-- 年份分布 -->
        <div class="slide">
          <div
            id="time:year"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            05年至09年注册用户数增速最快，“增量”阶段<br />09年后逐渐回落经历一个小高潮之后进入“存量”阶段
          </h2>
        </div>
        <!-- 月份分布 -->
        <div class="slide">
          <div
            id="time:month"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>冬季和春季用户注册量最多</h2>
        </div>
        <!-- 年份按序分布 -->
        <div class="slide">
          <div
            id="time:year_sort"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>08年、09年、10年是用户增长最快的几年</h2>
        </div>
        <!-- 月份按序分布 -->
        <div class="slide">
          <div
            id="time:month_sort"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            1月、2月以及7月、8月用户增长最快<br />考虑到豆瓣青年用户较多，猜测可能是寒暑假的时候
          </h2>
        </div>
      </div>

      <!-- 常居地 -->
      <div class="section" id="location">
        <div class="slide"><h1>「 常居地 」</h1></div>
        <div class="slide">
          <div
            id="location:map"
            style="width: 1000px;height:750px;margin: 0 auto;"
          ></div>
          <h2>用户主要集中在东部沿海地区、华中省会城市和直辖市</h2>
        </div>
        <!-- 地区按序分布 -->
        <div class="slide">
          <div
            id="location:sort"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            北京、上海占据了用户来源的Top2，深圳作为四大一线城市之一在文艺青年的数量上稍逊一筹
          </h2>
        </div>
        <!-- 海外用户 -->
        <div class="slide">
          <div
            id="location:country"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>常居地为海外的用户，一半来自于美国、英国和澳大利亚</h2>
        </div>
      </div>

      <!-- 电影 -->
      <div class="section">
        <div class="slide"><h1>「 电影 」&「 阅读 」</h1></div>
        <div class="slide">
          <div
            id="movie"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            绝大多数用户的电影「在看」列表为
            0，对「看过」的标记数量则远远大于「想看」
          </h2>
        </div>
        <div class="slide">
          <div
            id="book"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>阅读的分布与电影类似，但数量整体左移</h2>
        </div>
        <div class="slide">
          <div
            id="more:movie_do"
            style="width: 1000px;height:800px;margin: 0 auto;"
          ></div>
          <h2>
            标记「想看」的电影前三：《海贼王》、《西部世界：第一季》和《风味人间》
          </h2>
        </div>
      </div>

      <!-- 关注 -->
      <div class="section">
        <div class="slide"><h1>「 关注 」&「 被关注 」</h1></div>
        <div class="slide">
          <div
            id="contact:all"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>

          <h2>
            「关注」数量为0-20、100-200、20-40的用户占了 50% 以上<br />
            「被关注」数量为0-10的用户约占了所有用户的
            20%、数量为100-500的占了约 23%
          </h2>
        </div>
      </div>

      <!-- 用户名 -->
      <div class="section">
        <div class="slide"><h1>「 用户名 」&「 ID 」</h1></div>
        <div class="slide">
          <div
            id="user:username"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            用户的昵称里，用的最多中文字符是「小」、「阿」、「一」、「大」和「我」
          </h2>
        </div>
        <div class="slide">
          <div
            id="user:username_en"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>英文字符用的最多的则是「S」、「M」、「A」、「s」和「L」</h2>
        </div>
        <div class="slide">
          <div
            id="user:id"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>对ID未进行自定义的仅比自定义的多了 1.04%</h2>
        </div>
      </div>

      <!-- 更多 -->
      <div class="section">
        <div class="slide"><h1>「 更多 」</h1></div>

        <!-- 加入年份与均值 -->
        <div class="slide">
          <div
            id="more:year_average"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            用户的各项数据随着加入时间的变长逐渐增大
            <br />05年的老用户各项指标（除了加入小组数）都远大于其他年份的用户
          </h2>
        </div>
        <!-- 地区与平均值 -->
        <div class="slide">
          <div
            id="more:city_average"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>
            北京的用户最爱关注别人也最受别人关注，并且最喜爱阅读
            <br />上海人喜欢看电影和加小组，广州人最喜欢评论
          </h2>
        </div>
        <!-- 地区 电影 堆叠图 -->
        <div class="slide">
          <div
            id="more:city_movie"
            style="width: 800px;height:600px;margin: 0 auto;"
          ></div>
          <h2>电影与城市，北上差距不大，但「看过」的电影远超其他城市</h2>
        </div>
        <!-- 关注数、被关注数、加入时长 -->
        <!--
          <div class="slide">
            <div
              id="more:dur_rev_contact"
              style="width: 800px;height:600px;margin: 0 auto;"
            ></div>
          </div>
        -->
      </div>

      <div class="section">
        <img src="http://img.daixinye.com/xiaohui.png" style="width:200px;" />
        <h1>Thanks</h1>
      </div>
    </div>
  </body>
  <script>
    $(document).ready(function() {
      $("#fullpage").fullpage({
        //options here
        autoScrolling: true,
        scrollHorizontally: true,
        licenseKey: "OPEN-SOURCE-GPLV3-LICENSE"
      });

      //methods
      $.fn.fullpage.setAllowScrolling(true);
      $("#info-loading").hide();
      $("#fullpage").show();
    });
  </script>
  <script src="./index.js"></script>
</html>
